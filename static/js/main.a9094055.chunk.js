(this.webpackJsonphandwriting_ui=this.webpackJsonphandwriting_ui||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(25)},,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(10),s=n(7),o=n(1),l=(n(24),document.getElementById("root")),d=function(){var e=document.createElement("div");e.setAttribute("class","drawingArea");var t=document.createElement("div");t.setAttribute("class","titleContainer");var n=document.createElement("h2");n.innerText="Draw a digit",t.appendChild(n),e.appendChild(t);var r=document.createElement("canvas");r.setAttribute("class","canvas"),r.setAttribute("width","".concat(784)),r.setAttribute("height","".concat(784)),r.setAttribute("id","canvas"),r.style.backgroundColor="#000000";var a=r.getContext("2d");a.strokeStyle="#FFFFFF",a.lineJoin="round",a.lineWidth=28,e.appendChild(r);var i=function(e){var t=document.createElement("div");t.setAttribute("class","canvasControls");var n=document.createElement("div");n.setAttribute("class","rangeContainer");var r=document.createElement("input");r.setAttribute("id","range"),r.setAttribute("type","range"),r.setAttribute("min","".concat(28)),r.setAttribute("max","".concat(196)),r.setAttribute("value","".concat(112));var a=document.createElement("label");a.setAttribute("for","range"),a.innerHTML="Brush size",n.appendChild(a),n.appendChild(r),t.appendChild(n);var i=document.createElement("button");return i.innerText="Clear Canvas",t.appendChild(i),e.appendChild(t),{clearButtonEl:i,rangeEl:r}}(e),s=i.clearButtonEl,o=i.rangeEl;return l.appendChild(e),{canvasEl:r,clearButtonEl:s,rangeEl:o}},c=function(){var e=d(),t=e.canvasEl,n=e.clearButtonEl,r=e.rangeEl;return function(){var e=document.createElement("div");e.setAttribute("id","description"),e.setAttribute("class","description"),e.innerHTML='<div> <h2>Style Transfer for Handwritten Digits</h2>\n        This neural network transfers the "style" of a digit written in the black area to all other digits. \n        There is no exact definition of "style", it is learned in an unsupervised manner.\n        <br/> <br/>\n        The idea is the following. An encoder learns to map the image <b>x</b> into a representation <b>z</b> \n        which has all information about the image <i>except</i> its label: the digit <b>y</b>. \n        Then, a decoder takes both <b>z</b> and <b>y</b> and reconstructs the original image. If <b>z</b> \n        has no information about <b>y</b>, and if <b>z</b> and <b>y</b> together are enough to reconstruct <b>x</b>, \n        we can assume that <b>z</b> contains information about the "style" of the image. When we have such encoder \n        and decoder, then we can take <b>z</b> from one image and give a different <b>y</b> to see how other digits look like with this "style".\n        <br/> <br/>\n        \n        This is made possible by the method described in <a href="http://papers.nips.cc/paper/8122-invariant-representations-without-adversarial-training">\n        "Invariant Representations without Adversarial Training"</a> by Daniel Moyer, Shuyang Gao, Rob Brekelmans, Aram Galstyan and Greg Ver Steeg. \n        In short, the system is a variational autoencoder with an additional term in the loss function which minimizes an approximation of the mutual \n        information between <b>z</b> and <b>y</b>. Read more in <a href="https://dcmoyer.github.io/selfhosted/blag.html">Daniel Moyer\'s blogpost</a>. \n        \n         <br/> <br/>\n        We have <a href="https://github.com/rdarbinyan/handwriting_learning">re-implemented the algorithm in \n        Keras</a>, trained the model on MNIST, and brought the weights to tensorflow.js.</div>',l.appendChild(e);var t=document.createElement("div");t.setAttribute("id","right_component"),t.setAttribute("style","display:none"),t.setAttribute("class","rightComponent");var n=document.createElement("svg");n.innerHTML='<svg width="200px" height="100px">\n                                <defs>\n                                    <marker id="triangle" viewBox="0 0 10 10"\n                                          refX="1" refY="5" \n                                          markerUnits="strokeWidth"\n                                          markerWidth="10" markerHeight="10"\n                                          orient="auto">\n                                      <path d="M 0 0 L 10 5 L 0 10 z" fill="#03A9F4"/>\n                                    </marker>\n                                  </defs>\n                                <line x1="0" y1="50" x2="184" y2="50" style="stroke:#03A9F4;stroke-width:2" marker-end="url(#triangle)" />\n                        </svg>',t.appendChild(n);var r=document.createElement("img");r.setAttribute("id","input_img"),r.setAttribute("class","inputImg"),r.setAttribute("width","28"),r.setAttribute("height","28"),t.appendChild(r);var a=document.createElement("svg");a.innerHTML='<svg width="200px" height="720px">\n                                <defs>\n                                    <marker id="triangle" viewBox="0 0 10 10"\n                                          refX="1" refY="5" \n                                          markerUnits="strokeWidth"\n                                          markerWidth="10" markerHeight="10"\n                                          orient="auto">\n                                      <path d="M 0 0 L 10 5 L 0 10 z" fill="#03A9F4"/>\n                                    </marker>\n                                </defs>\n                                <line x1="0" y1="360" x2="190" y2="76" style="stroke:#03A9F4;stroke-width:2" marker-end="url(#triangle)"/>\n                                <line x1="0" y1="360" x2="188" y2="135" style="stroke:#03A9F4;stroke-width:2" marker-end="url(#triangle)"/>\n                                <line x1="0" y1="360" x2="187" y2="192" style="stroke:#03A9F4;stroke-width:2" marker-end="url(#triangle)"/>\n                                <line x1="0" y1="360" x2="185" y2="260" style="stroke:#03A9F4;stroke-width:2" marker-end="url(#triangle)"/>\n                                <line x1="0" y1="360" x2="184" y2="328" style="stroke:#03A9F4;stroke-width:2" marker-end="url(#triangle)"/>\n                                <line x1="0" y1="360" x2="184" y2="393" style="stroke:#03A9F4;stroke-width:2" marker-end="url(#triangle)"/>\n                                <line x1="0" y1="360" x2="185" y2="460" style="stroke:#03A9F4;stroke-width:2" marker-end="url(#triangle)"/>\n                                <line x1="0" y1="360" x2="187   " y2="528" style="stroke:#03A9F4;stroke-width:2" marker-end="url(#triangle)"/>\n                                <line x1="0" y1="360" x2="188" y2="585" style="stroke:#03A9F4;stroke-width:2" marker-end="url(#triangle)"/>\n                                <line x1="0" y1="360" x2="190" y2="644" style="stroke:#03A9F4;stroke-width:2" marker-end="url(#triangle)"/>\n                        </svg>',t.appendChild(a);var i=document.createElement("div");i.setAttribute("id","result_box"),i.setAttribute("class","resultBox");for(var s=0;s<10;++s){var o=document.createElement("img");o.setAttribute("class","outputImg"),o.setAttribute("width","56"),o.setAttribute("height","56"),i.appendChild(o)}t.appendChild(i),l.appendChild(t)}(),{clearButtonEl:n,canvasEl:t,rangeEl:r}},u=(n(4),function(e,t){var n,r=[],a=[],i=[],s=e.getContext("2d"),o=document.createElement("canvas"),l=o.getContext("2d");l.fillStyle="#000000";var d=function(e,t,n){r.push(e),a.push(t),i.push(n)},c=function(){s.lineWidth=t.valueAsNumber,s.clearRect(0,0,s.canvas.width,s.canvas.height);for(var e=0;e<r.length;++e)s.beginPath(),i[e]&&e?s.moveTo(r[e-1],a[e-1]):s.moveTo(r[e]-1,a[e]),s.lineTo(r[e],a[e]),s.closePath(),s.stroke();u()},u=function(){var n,r,a,i,s=t.valueAsNumber;return n=0-s,r=784+s,a=0-s,i=784+s,o.width=r-n,o.height=i-a,l.fillRect(0,0,o.width,o.height),l.drawImage(e,n,a,r-n,i-a,0,0,r-n,i-a),document.getElementById("input_img").src=o.toDataURL(),document.getElementById("result_box").style.display="flex",o},h=function(){var e=document.getElementById("right_component"),t=document.getElementById("description");e.setAttribute("style",""),t.setAttribute("style","display:none")};return e.addEventListener("mousedown",(function(t){var a=t.pageX-e.offsetLeft,i=t.pageY-e.offsetTop;r.length||h(),n=!0,d(a,i),c()})),e.addEventListener("touchstart",(function(t){t.target===e&&t.preventDefault();var a=e.getBoundingClientRect(),i=t.touches[0],s=i.clientX-a.left,o=i.clientY-a.top;r.length||h(),n=!0,d(s,o),c()})),e.addEventListener("mousemove",(function(t){if(n){var r=t.pageX-e.offsetLeft,a=t.pageY-e.offsetTop;d(r,a,!0),c()}})),e.addEventListener("touchmove",(function(t){if(t.target===e&&t.preventDefault(),n){var r=e.getBoundingClientRect(),a=t.touches[0],i=a.clientX-r.left,s=a.clientY-r.top;n=!0,d(i,s),c()}})),e.addEventListener("mouseup",(function(e){n=!1})),e.addEventListener("mouseleave",(function(e){n=!1})),e.addEventListener("touchend",(function(t){t.target===e&&t.preventDefault(),n=!1})),e.addEventListener("touchcancel",(function(t){t.target===e&&t.preventDefault(),n=!1})),t.oninput=c,{tempCanvasEl:o,clearCanvas:function(){s.clearRect(0,0,784,784),r=[],a=[],i=[],u()},drawOnCanvas:c}});document.getElementById("root").setAttribute("class","loader"),Object(s.a)(a.a.mark((function e(){var t,n,r,l,d,h,m,p,g,b,v,f,y,k;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k=function(){return(k=Object(s.a)(a.a.mark((function e(){var t,n,i,s,d,c,u,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementsByClassName("outputImg"),e.next=3,f(b);case 3:n=e.sent,i=0;case 5:if(!(i<t.length)){e.next=22;break}return(s=[0,0,0,0,0,0,0,0,0,0])[i]=1,e.next=10,r.predict([n,o.c([s])]);case 10:return d=e.sent,e.next=13,l.predict(d[2]);case 13:return c=e.sent,u=c.reshape([28,28]),h=document.createElement("canvas"),e.next=18,o.a.toPixels(u,h);case 18:t[i].src=h.toDataURL();case 19:++i,e.next=5;break;case 22:setTimeout(y,1e3);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)},y=function(){return k.apply(this,arguments)},e.next=4,Promise.all([o.b("https://raw.githubusercontent.com/rdarbinyan/handwriting_ui/master/models/encoder/model.json"),o.b("https://raw.githubusercontent.com/rdarbinyan/handwriting_ui/master/models/decoder/model.json")]);case 4:return t=e.sent,n=Object(i.a)(t,2),r=n[0],l=n[1],document.getElementById("root").setAttribute("class",""),d=c(),h=d.clearButtonEl,m=d.canvasEl,p=d.rangeEl,g=u(m,p),b=g.tempCanvasEl,v=g.clearCanvas,h.addEventListener("click",v),f=function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.a.fromPixels(t).resizeNearestNeighbor([28,28]),r=document.createElement("canvas"),e.next=4,o.a.toPixels(n,r);case 4:return document.getElementById("input_img").src=r.toDataURL(),e.abrupt("return",o.a.fromPixels(t).resizeNearestNeighbor([28,28]).mean(2).toFloat().reshape([1,784]).div(255));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=15,y();case 15:case"end":return e.stop()}}),e)})))()}],[[11,1,2]]]);
//# sourceMappingURL=main.a9094055.chunk.js.map